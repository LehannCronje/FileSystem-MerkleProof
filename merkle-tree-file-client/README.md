# Merkle Tree File System Client

Client that creates an interface to upload files to a server. It also allows for downloading files. Before files are uploaded, a merkle tree hash gets generated and saved in localstorage. This hash will be compared on file download when a root hash is calculated using the merkle proof provided from the server.

# Run

run `yarn start`

# Build

run `yarn build`

# Container

1. run `docker build -t {image name} .`
2. run `docker run -d -p 80:3000 {image}`

# Merkle Tree

## Root hash calculation
The root hash is generated by looping through the list of initial hashes. It loops in iteration of two, combining the index hashes of `i` & `(i + 1)` together.

The algorithm will recursevily construct these hashes until there is only 1 hash left, which will be the root hash.

If the lenght of hashes is uneven, it will push the right most hash to the list.

## Merkle root from proof calculation

The root is caluclated by looping through the given proof. The proof is provided in format `{hash: String, direction: String}`. 
```
const merkleRootFromProof = merkleProof.reduce((hashProof1, hashProof2) => {
```

If the direction of the `hashProof2` is `RIGHT`, that means the combined hash should be `sha256(hashProof1.hash + hashProof2.hash)`.

If the direction `hashProof2` is not `RIGHT` it means it's `LEFT`, meaning that the combined hash should be `sha256(hashProof2.hash + hashProof1.hash)`.

This is done using the javascript reduce function and in the end when 1 hash is left the root is returned.

